# AI教练功能增强说明

## 功能概述

AI教练现在能够访问用户的完整身体信息，提供更加个性化和精准的健身建议，同时确保在聊天过程中不会直接提及用户的敏感身体数据。

## 增强内容

### 1. 用户身体信息访问

AI教练现在可以访问以下用户信息：

**基本信息：**
- 姓名/昵称
- 健身目标（减重/增肌）
- 当前进度
- 打卡情况

**身体信息：**
- 年龄
- 身高（cm）
- 体重（kg）
- BMI值
- BMI状态（偏瘦/正常/偏胖/肥胖）

### 2. 个性化建议机制

AI教练会根据用户的身体状况提供定制化建议：

- **年龄适配**：根据用户年龄调整运动强度和建议方式
- **BMI考量**：根据BMI状态调整减重/增肌策略
- **目标导向**：结合身体状况和健身目标提供精准指导
- **进度跟踪**：基于当前进度和身体状况调整建议

### 3. 隐私保护原则

**重要特性：AI教练不会在聊天中直接提及用户的具体身体数据**

- ✅ 会根据用户身体状况调整建议内容
- ✅ 会体现对用户身体状况的关注
- ❌ 不会直接说出具体的体重、BMI等数值
- ❌ 不会在对话中暴露敏感的身体信息

### 4. 实现细节

#### 用户上下文结构
```typescript
interface UserContext {
  // 基本信息
  name: string;
  goals: string[];
  currentProgress: string;
  todayCheckIns: number;
  totalCheckIns: number;
  
  // 身体信息
  age: number;
  height: number; // cm
  weight: number; // kg
  bmi: number;
  bmiStatus: string;
  fitnessGoal: 'lose_weight' | 'gain_muscle';
}
```

#### 系统提示词指导原则
1. 根据用户的身体状况和目标，提供个性化的建议
2. 不要在对话中直接提及用户的具体身体数据
3. 可以根据用户的身体状况调整建议的强度和方式
4. 如果用户BMI偏高/偏低，要在建议中体现适当的关注但不直接说出
5. 根据年龄特点调整沟通方式和建议内容

## 使用示例

### 场景1：BMI偏高的用户咨询运动建议
**用户**："我想开始运动，有什么建议吗？"

**AI教练（温和型）**："很棒的决定！建议你从低强度的有氧运动开始，比如快走或游泳，这样对身体负担较小。记住要循序渐进，身体适应后再逐步增加强度哦～"

*（AI根据用户BMI状况调整了建议，推荐低强度运动，但没有直接提及体重或BMI）*

### 场景2：年轻用户咨询增肌计划
**用户**："我想增肌，应该怎么练？"

**AI教练（严格型）**："年轻就是资本！你的身体恢复能力很强，可以进行力量训练。建议每周3-4次，重点练大肌群。记住，增肌需要足够的蛋白质摄入，每天要保证充足的营养！"

*（AI根据用户年龄特点调整了建议强度和沟通方式）*

## 技术实现

### 文件修改
1. **`src/pages/AICoach.tsx`**：更新用户上下文创建逻辑，包含BMI计算

### BMI计算逻辑
```javascript
const heightInM = user.height / 100;
const bmi = user.weight / (heightInM * heightInM);
const getBMIStatus = (bmi) => {
  if (bmi < 18.5) return '偏瘦';
  if (bmi < 24) return '正常';
  if (bmi < 28) return '偏胖';
  return '肥胖';
};
```

## 效果验证

用户可以通过以下方式验证AI教练的增强功能：

1. **进入AI教练页面**：导航到应用中的AI教练功能
2. **开始对话**：询问健身相关问题
3. **观察个性化建议**：注意AI教练的回复是否体现了对用户身体状况的了解
4. **验证隐私保护**：确认AI不会直接提及具体的身体数据

## 注意事项

- AI教练功能使用本地生成的回复
- 用户身体信息仅用于提供更好的建议，不会被存储或传输到第三方